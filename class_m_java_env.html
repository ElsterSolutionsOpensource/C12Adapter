<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C12Adapter Opensource C++ Interface: MJavaEnv Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C12Adapter Opensource C++ Interface
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_m_java_env.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_m_java_env-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MJavaEnv Class Reference<div class="ingroups"><a class="el" href="group___m_c_o_r_e.html">MCORE</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Scoped Java environment handler.  
 <a href="class_m_java_env.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a78b77af521e1aef36ed60301579a00c7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="class_m_java_env.html#a78b77af521e1aef36ed60301579a00c7a1392c2d7c421b09ae6cc24d9bc2012f7">JniVersion</a> = JNI_VERSION_1_4
 }</td></tr>
<tr class="separator:a78b77af521e1aef36ed60301579a00c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a793b4cb6752e7ba92236ea3dd0c55ec7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a793b4cb6752e7ba92236ea3dd0c55ec7">MJavaEnv</a> ()</td></tr>
<tr class="memdesc:a793b4cb6752e7ba92236ea3dd0c55ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most useful constructor that fetches the environment and stores it internally for further use.  <a href="#a793b4cb6752e7ba92236ea3dd0c55ec7">More...</a><br /></td></tr>
<tr class="separator:a793b4cb6752e7ba92236ea3dd0c55ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ec925ac74196388950784e2e60a8ff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#aa0ec925ac74196388950784e2e60a8ff">MJavaEnv</a> (JNIEnv *env)</td></tr>
<tr class="memdesc:aa0ec925ac74196388950784e2e60a8ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor that takes an explicit environment.  <a href="#aa0ec925ac74196388950784e2e60a8ff">More...</a><br /></td></tr>
<tr class="separator:aa0ec925ac74196388950784e2e60a8ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a167c6a40502ce5bc77db2f0e5149a3b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a167c6a40502ce5bc77db2f0e5149a3b2">~MJavaEnv</a> ()</td></tr>
<tr class="memdesc:a167c6a40502ce5bc77db2f0e5149a3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor that unregisters the java environment.  <a href="#a167c6a40502ce5bc77db2f0e5149a3b2">More...</a><br /></td></tr>
<tr class="separator:a167c6a40502ce5bc77db2f0e5149a3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34d1bc8a539ca9f75f9b745f59c4f29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#af34d1bc8a539ca9f75f9b745f59c4f29">AddToLocalObjects</a> (jobject obj)</td></tr>
<tr class="memdesc:af34d1bc8a539ca9f75f9b745f59c4f29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a given Java object to the list of local objects that have to be deleted at destruction.  <a href="#af34d1bc8a539ca9f75f9b745f59c4f29">More...</a><br /></td></tr>
<tr class="separator:af34d1bc8a539ca9f75f9b745f59c4f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2baac009502bcd0e2246c18002b535df"><td class="memItemLeft" align="right" valign="top">jbyteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a2baac009502bcd0e2246c18002b535df">NewLocalByteArray</a> (int size)</td></tr>
<tr class="memdesc:a2baac009502bcd0e2246c18002b535df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new uninitialized Java byte array and add it to the list of local references.  <a href="#a2baac009502bcd0e2246c18002b535df">More...</a><br /></td></tr>
<tr class="separator:a2baac009502bcd0e2246c18002b535df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c45377d9cd43ca349b6f1e1ed6e7643"><td class="memItemLeft" align="right" valign="top">jbyteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a5c45377d9cd43ca349b6f1e1ed6e7643">NewLocalByteArray</a> (const char *buff, int size)</td></tr>
<tr class="memdesc:a5c45377d9cd43ca349b6f1e1ed6e7643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new initialized Java byte array and add it to the list of local references.  <a href="#a5c45377d9cd43ca349b6f1e1ed6e7643">More...</a><br /></td></tr>
<tr class="separator:a5c45377d9cd43ca349b6f1e1ed6e7643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade68b7c1be3aeed5a46eedb11e7520ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#ade68b7c1be3aeed5a46eedb11e7520ef">ExceptionCppToJava</a> (<a class="el" href="class_m_exception.html">MException</a> &amp;ex)</td></tr>
<tr class="memdesc:ade68b7c1be3aeed5a46eedb11e7520ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object method that initializes the java exception in the current environment from a given C++ exception.  <a href="#ade68b7c1be3aeed5a46eedb11e7520ef">More...</a><br /></td></tr>
<tr class="separator:ade68b7c1be3aeed5a46eedb11e7520ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7e5742d214d7c2597e17f7d101eba8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#ae7e5742d214d7c2597e17f7d101eba8e">CheckForJavaException</a> ()</td></tr>
<tr class="memdesc:ae7e5742d214d7c2597e17f7d101eba8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert java exception, if it is present, into C++.  <a href="#ae7e5742d214d7c2597e17f7d101eba8e">More...</a><br /></td></tr>
<tr class="separator:ae7e5742d214d7c2597e17f7d101eba8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9b8990ce779e7fcb13eeebdf5a1313"><td class="memItemLeft" align="right" valign="top">jclass&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a2e9b8990ce779e7fcb13eeebdf5a1313">FindClass</a> (const char *javaClassName)</td></tr>
<tr class="memdesc:a2e9b8990ce779e7fcb13eeebdf5a1313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Java class, throw error if it is not found.  <a href="#a2e9b8990ce779e7fcb13eeebdf5a1313">More...</a><br /></td></tr>
<tr class="separator:a2e9b8990ce779e7fcb13eeebdf5a1313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2708f04d737291c77ead8c5c1bf04c29"><td class="memItemLeft" align="right" valign="top">jmethodID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a> (jclass clazz, const char *name, const char *signature)</td></tr>
<tr class="memdesc:a2708f04d737291c77ead8c5c1bf04c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Java method ID, throw error if it is not found.  <a href="#a2708f04d737291c77ead8c5c1bf04c29">More...</a><br /></td></tr>
<tr class="separator:a2708f04d737291c77ead8c5c1bf04c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4348db6443948c78277e4f2e4d39454f"><td class="memItemLeft" align="right" valign="top">jmethodID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f">GetStaticMethodID</a> (jclass clazz, const char *name, const char *signature)</td></tr>
<tr class="memdesc:a4348db6443948c78277e4f2e4d39454f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Java static method ID, throw error if it is not found.  <a href="#a4348db6443948c78277e4f2e4d39454f">More...</a><br /></td></tr>
<tr class="separator:a4348db6443948c78277e4f2e4d39454f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43adf71d1121ddb6c333cbe4080914c"><td class="memItemLeft" align="right" valign="top">jfieldID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#aa43adf71d1121ddb6c333cbe4080914c">GetFieldID</a> (jclass clazz, const char *name, const char *signature)</td></tr>
<tr class="memdesc:aa43adf71d1121ddb6c333cbe4080914c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Java field ID, throw error if it is not found.  <a href="#aa43adf71d1121ddb6c333cbe4080914c">More...</a><br /></td></tr>
<tr class="separator:aa43adf71d1121ddb6c333cbe4080914c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880dd954d429c5b77a4477d76365e5c5"><td class="memItemLeft" align="right" valign="top">jfieldID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a880dd954d429c5b77a4477d76365e5c5">GetStaticFieldID</a> (jclass clazz, const char *name, const char *signature)</td></tr>
<tr class="memdesc:a880dd954d429c5b77a4477d76365e5c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Java static field ID, throw error if it is not found.  <a href="#a880dd954d429c5b77a4477d76365e5c5">More...</a><br /></td></tr>
<tr class="separator:a880dd954d429c5b77a4477d76365e5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a18fba182a92fe876024da1e51e81a934"><td class="memItemLeft" align="right" valign="top">JNIEnv *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a18fba182a92fe876024da1e51e81a934">GetEnv</a> ()</td></tr>
<tr class="separator:a18fba182a92fe876024da1e51e81a934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae115f4a8275da7c6920aa97adeb90f85"><td class="memItemLeft" align="right" valign="top">const JNIEnv *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#ae115f4a8275da7c6920aa97adeb90f85">GetEnv</a> () const </td></tr>
<tr class="separator:ae115f4a8275da7c6920aa97adeb90f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a3fa84ba6966142a48b28c9cd912ba42f"><td class="memItemLeft" align="right" valign="top">JNIEnv *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a3fa84ba6966142a48b28c9cd912ba42f">operator-&gt;</a> ()</td></tr>
<tr class="separator:a3fa84ba6966142a48b28c9cd912ba42f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6702be38f1ae9881e11cbf35867bc39"><td class="memItemLeft" align="right" valign="top">const JNIEnv *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#ae6702be38f1ae9881e11cbf35867bc39">operator-&gt;</a> () const </td></tr>
<tr class="separator:ae6702be38f1ae9881e11cbf35867bc39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a52c56817ebfad43f675b17ca6ab82ee7"><td class="memItemLeft" align="right" valign="top">jstring&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a52c56817ebfad43f675b17ca6ab82ee7">NewLocalStringUTF</a> (const char *str)</td></tr>
<tr class="separator:a52c56817ebfad43f675b17ca6ab82ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a090b4d59d8e3a55c16c22a59962d4b82"><td class="memItemLeft" align="right" valign="top">jstring&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a090b4d59d8e3a55c16c22a59962d4b82">NewLocalStringUTF</a> (const <a class="el" href="group___m_c_o_r_e.html#gae0f1a09eb8dfba6a5cf718419b3a0304">MStdString</a> &amp;str)</td></tr>
<tr class="separator:a090b4d59d8e3a55c16c22a59962d4b82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a57e1b99f6dceb934ba10c31ee6b138fe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a57e1b99f6dceb934ba10c31ee6b138fe">StaticExceptionCppToJava</a> (JNIEnv *jenv, <a class="el" href="class_m_exception.html">MException</a> &amp;ex)</td></tr>
<tr class="memdesc:a57e1b99f6dceb934ba10c31ee6b138fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class method that initializes java exception in the current environment from a given C++ exception.  <a href="#a57e1b99f6dceb934ba10c31ee6b138fe">More...</a><br /></td></tr>
<tr class="separator:a57e1b99f6dceb934ba10c31ee6b138fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a600ee3918e72fa16b4302f4fcc7b7ca1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_m_java_env.html#a600ee3918e72fa16b4302f4fcc7b7ca1">CheckForJniError</a> (jint code, const char *errorMessage)</td></tr>
<tr class="memdesc:a600ee3918e72fa16b4302f4fcc7b7ca1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for JNI error code.  <a href="#a600ee3918e72fa16b4302f4fcc7b7ca1">More...</a><br /></td></tr>
<tr class="separator:a600ee3918e72fa16b4302f4fcc7b7ca1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Scoped Java environment handler. </p>
<p>Use this class as a wrapper of methods that call Java code from C++ as it provides java environment variable for the current thread context. Typical, most generic and reliable example of full use of the class: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyCppClass::MyCppClass() <span class="comment">// constructor</span></div><div class="line">{</div><div class="line">   <a class="code" href="class_m_java_env.html">MJavaEnv</a> env;</div><div class="line">   jclass c = env.<a class="code" href="class_m_java_env.html#a2e9b8990ce779e7fcb13eeebdf5a1313">FindClass</a>(<span class="stringliteral">&quot;org/me/MyJavaClass&quot;</span>); <span class="comment">// throws an exception at failure</span></div><div class="line">   jmethodID idConstructor = env.<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(c, <span class="stringliteral">&quot;&lt;init&gt;&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div><div class="line">   jobject o = env-&gt;NewObject(c, idConstructor, portNameJ);</div><div class="line">   env.<a class="code" href="class_m_java_env.html#ae7e5742d214d7c2597e17f7d101eba8e">CheckForJavaException</a>(); <span class="comment">// the above c and o were local objects, they need not be destroyed</span></div><div class="line">                                <span class="comment">// if the exception is raised</span></div><div class="line"></div><div class="line">   <span class="comment">// Globalize local references and store them in class.</span></div><div class="line">   <span class="comment">// Storing the class reference is optional as all method IDs</span></div><div class="line">   <span class="comment">//    can be resolved here in the constructor.</span></div><div class="line">   m_javaClass = <span class="keyword">static_cast&lt;</span>jclass<span class="keyword">&gt;</span>(env-&gt;NewGlobalRef(c));</div><div class="line">   m_javaObject = env-&gt;NewGlobalRef(o);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> MyCppClass::~MyCppClass() <span class="comment">// destructor</span></div><div class="line">{</div><div class="line">   <a class="code" href="class_m_java_env.html">MJavaEnv</a> env;</div><div class="line">   <span class="comment">// If we do not have to call anything in Java at destruction, just delete references</span></div><div class="line">   env-&gt;DeleteGlobalRef(m_javaObject); <span class="comment">// free pointer, mark for garbage collector</span></div><div class="line">   env-&gt;DeleteGlobalRef(m_javaClass);  <span class="comment">// (only if a global reference is stored)</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> MyCppClass::MyCppMethodThatCallsJavaMethods()</div><div class="line">{</div><div class="line">   <a class="code" href="class_m_java_env.html">MJavaEnv</a> env;</div><div class="line"></div><div class="line">   <span class="comment">// If method ID was not already fetched somewhere</span></div><div class="line">   jmethodId methodId = env.<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(m_javaClass, <span class="stringliteral">&quot;someJavaMethod&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div><div class="line"></div><div class="line">   env-&gt;CallVoidMethod(m_javaObject, methodId);</div><div class="line">   env.<a class="code" href="class_m_java_env.html#ae7e5742d214d7c2597e17f7d101eba8e">CheckForJavaException</a>();</div><div class="line">}</div></div><!-- fragment --><p>As a slight optimization it is possible to reuse java environment class among several calls, however one has to be careful as java environment has to be created and released within a context of a single Java call, or a single detached C++ thread. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a78b77af521e1aef36ed60301579a00c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a78b77af521e1aef36ed60301579a00c7a1392c2d7c421b09ae6cc24d9bc2012f7"></a>JniVersion&#160;</td><td class="fielddoc">
<p>JNI version used by the interface. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a793b4cb6752e7ba92236ea3dd0c55ec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MJavaEnv::MJavaEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Most useful constructor that fetches the environment and stores it internally for further use. </p>
<p>The class has to be created in C++ code that is by itself working within Java. If necessary, and the current C++ thread is not registered with Java, the registering is performed. </p>

</div>
</div>
<a class="anchor" id="aa0ec925ac74196388950784e2e60a8ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MJavaEnv::MJavaEnv </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&#160;</td>
          <td class="paramname"><em>env</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor that takes an explicit environment. </p>
<p>This has to be called within the registered Java thread when the environment is received already. It is assumed that the java environment is already registered with java thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>Java environment to be used within the object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a167c6a40502ce5bc77db2f0e5149a3b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MJavaEnv::~MJavaEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor that unregisters the java environment. </p>
<p>If the environment was executed in a context of a C++ only thread it is unregistered. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af34d1bc8a539ca9f75f9b745f59c4f29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MJavaEnv::AddToLocalObjects </td>
          <td>(</td>
          <td class="paramtype">jobject&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a given Java object to the list of local objects that have to be deleted at destruction. </p>
<p>This method is a handy way of dealing with JNI local references that have to be removed at the exit of method. </p>

</div>
</div>
<a class="anchor" id="ae7e5742d214d7c2597e17f7d101eba8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MJavaEnv::CheckForJavaException </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert java exception, if it is present, into C++. </p>
<p>This call should be made after any method such as JNI Call*Method that can raise Java exceptions. If a Java exception takes place, it is converted into a C++ exception of the most appropriate MeteringSDK exception class and thrown as C++ exception into C++. Any non-MeteringSDK exceptions will be converted into <a class="el" href="class_m_exception.html">MException</a>.</p>
<p>In between Call*Method and CheckForJavaException only very few JNI methods can be called: </p><div class="fragment"><div class="line">ExceptionOccurred()</div><div class="line">ExceptionDescribe()</div><div class="line">ExceptionClear()</div><div class="line">ExceptionCheck()</div><div class="line">ReleaseStringChars()</div><div class="line">ReleaseStringUTFChars()</div><div class="line">ReleaseStringCritical()</div><div class="line">Release&lt;Type&gt;ArrayElements()</div><div class="line">ReleasePrimitiveArrayCritical()</div><div class="line">DeleteLocalRef()</div><div class="line">DeleteGlobalRef()</div><div class="line">DeleteWeakGlobalRef()</div><div class="line">MonitorExit()</div><div class="line">PushLocalFrame()</div><div class="line">PopLocalFrame()</div></div><!-- fragment --><p> as specified at <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/design.html#exception_handling">http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/design.html#exception_handling</a> </p>

</div>
</div>
<a class="anchor" id="a600ee3918e72fa16b4302f4fcc7b7ca1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MJavaEnv::CheckForJniError </td>
          <td>(</td>
          <td class="paramtype">jint&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>errorMessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check for JNI error code. </p>
<p>Throw a C++ exception if the given result of JNI function is erroneous, not equal to JNI_OK.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>Result of a JNI function such as AttachCurrentThread or GetEnv. </td></tr>
    <tr><td class="paramname">errorMessage</td><td>Whatever will be the error message if code is not JNI_OK. This string should not have C format parameters. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade68b7c1be3aeed5a46eedb11e7520ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MJavaEnv::ExceptionCppToJava </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_m_exception.html">MException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Object method that initializes the java exception in the current environment from a given C++ exception. </p>
<p>The robustness of this method assumes the presence of MTools Java facade that provides the exception hierarchy that matches the one of MeteringSDK. After the call is made, the execution should immediately reach Java code for the exception to be raised from there.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ex</td><td>C++ exception that has to be converted into java exception of the current environment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a57e1b99f6dceb934ba10c31ee6b138fe" title="Class method that initializes java exception in the current environment from a given C++ exception...">StaticExceptionCppToJava</a> - static version that is more convenient for cases when the native JNIEnv is already present. </dd>
<dd>
<a class="el" href="class_m_java_env.html#ae7e5742d214d7c2597e17f7d101eba8e" title="Convert java exception, if it is present, into C++. ">CheckForJavaException</a> - reverse method, convert java exception, if it is present, into C++. </dd></dl>

</div>
</div>
<a class="anchor" id="a2e9b8990ce779e7fcb13eeebdf5a1313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jclass MJavaEnv::FindClass </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>javaClassName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Java class, throw error if it is not found. </p>
<p>Different from JNI FindClass, still available as </p><div class="fragment"><div class="line">jclass c = env-&gt;<a class="code" href="class_m_java_env.html#a2e9b8990ce779e7fcb13eeebdf5a1313">FindClass</a>(<span class="stringliteral">&quot;org/me/MyJavaClass&quot;</span>);</div></div><!-- fragment --><p> this object method, callable with a period like this: </p><div class="fragment"><div class="line">jclass c = env.<a class="code" href="class_m_java_env.html#a2e9b8990ce779e7fcb13eeebdf5a1313">FindClass</a>(<span class="stringliteral">&quot;org/me/MyJavaClass&quot;</span>);</div></div><!-- fragment --><p> will throw an exception if there is no such class.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">javaClassName</td><td>Java class name signature as specified by Java.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI class object. </dd></dl>

</div>
</div>
<a class="anchor" id="a18fba182a92fe876024da1e51e81a934"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JNIEnv* MJavaEnv::GetEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access the native java environment.</p>
<p>This call is rarely necessary.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a3fa84ba6966142a48b28c9cd912ba42f">operator-&gt;()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ae115f4a8275da7c6920aa97adeb90f85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const JNIEnv* MJavaEnv::GetEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access the native java environment.</p>
<p>This call is rarely necessary.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a3fa84ba6966142a48b28c9cd912ba42f">operator-&gt;()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa43adf71d1121ddb6c333cbe4080914c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jfieldID MJavaEnv::GetFieldID </td>
          <td>(</td>
          <td class="paramtype">jclass&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>signature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Java field ID, throw error if it is not found. </p>
<p>Different from JNI GetFieldID, still available as </p><div class="fragment"><div class="line">jclass c = env-&gt;<a class="code" href="class_m_java_env.html#aa43adf71d1121ddb6c333cbe4080914c">GetFieldID</a>(clazz, <span class="stringliteral">&quot;fieldName&quot;</span>, <span class="stringliteral">&quot;I&quot;</span>);</div></div><!-- fragment --><p> this object method, callable with a period like this: </p><div class="fragment"><div class="line">jclass c = env.<a class="code" href="class_m_java_env.html#aa43adf71d1121ddb6c333cbe4080914c">GetFieldID</a>(clazz, <span class="stringliteral">&quot;fieldName&quot;</span>, <span class="stringliteral">&quot;I&quot;</span>);</div></div><!-- fragment --><p> will throw an exception if there is no such field.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>Java class object. </td></tr>
    <tr><td class="paramname">name</td><td>Field name. </td></tr>
    <tr><td class="paramname">signature</td><td>Field signature, as defined by Java.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI field ID, not a null.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f" title="Get Java static method ID, throw error if it is not found. ">GetStaticMethodID</a> - for getting an ID of a class method. </dd></dl>

</div>
</div>
<a class="anchor" id="a2708f04d737291c77ead8c5c1bf04c29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jmethodID MJavaEnv::GetMethodID </td>
          <td>(</td>
          <td class="paramtype">jclass&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>signature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Java method ID, throw error if it is not found. </p>
<p>Different from JNI GetMethodID, still available as </p><div class="fragment"><div class="line">jclass c = env-&gt;<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;methodName&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div></div><!-- fragment --><p> this object method, callable with a period like this: </p><div class="fragment"><div class="line">jclass c = env.<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;methodName&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div></div><!-- fragment --><p> will throw an exception if there is no such method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>Java class object. </td></tr>
    <tr><td class="paramname">name</td><td>Method name. </td></tr>
    <tr><td class="paramname">signature</td><td>Method signature, as defined by Java.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI method ID, not a null.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f" title="Get Java static method ID, throw error if it is not found. ">GetStaticMethodID</a> - for getting an ID of a class method. </dd></dl>

</div>
</div>
<a class="anchor" id="a880dd954d429c5b77a4477d76365e5c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jfieldID MJavaEnv::GetStaticFieldID </td>
          <td>(</td>
          <td class="paramtype">jclass&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>signature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Java static field ID, throw error if it is not found. </p>
<p>Different from JNI GetStaticFieldID, still available as </p><div class="fragment"><div class="line">jclass c = env-&gt;<a class="code" href="class_m_java_env.html#a880dd954d429c5b77a4477d76365e5c5">GetStaticFieldID</a>(clazz, <span class="stringliteral">&quot;fieldName&quot;</span>, <span class="stringliteral">&quot;I&quot;</span>);</div></div><!-- fragment --><p> this object method, callable with a period like this: </p><div class="fragment"><div class="line">jclass c = env.<a class="code" href="class_m_java_env.html#a880dd954d429c5b77a4477d76365e5c5">GetStaticFieldID</a>(clazz, <span class="stringliteral">&quot;fieldName&quot;</span>, <span class="stringliteral">&quot;I&quot;</span>);</div></div><!-- fragment --><p> will throw an exception if there is no such static field.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>Java class object. </td></tr>
    <tr><td class="paramname">name</td><td>Field name. </td></tr>
    <tr><td class="paramname">signature</td><td>Field signature, as defined by Java.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI field ID, not a null.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f" title="Get Java static method ID, throw error if it is not found. ">GetStaticMethodID</a> - for getting an ID of a class method. </dd></dl>

</div>
</div>
<a class="anchor" id="a4348db6443948c78277e4f2e4d39454f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jmethodID MJavaEnv::GetStaticMethodID </td>
          <td>(</td>
          <td class="paramtype">jclass&#160;</td>
          <td class="paramname"><em>clazz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>signature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Java static method ID, throw error if it is not found. </p>
<p>Different from JNI GetStaticMethodID, still available as </p><div class="fragment"><div class="line">jclass c = env-&gt;<a class="code" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f">GetStaticMethodID</a>(clazz, <span class="stringliteral">&quot;methodName&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div></div><!-- fragment --><p> this object method, callable with a period like this: </p><div class="fragment"><div class="line">jclass c = env.<a class="code" href="class_m_java_env.html#a4348db6443948c78277e4f2e4d39454f">GetStaticMethodID</a>(clazz, <span class="stringliteral">&quot;methodName&quot;</span>, <span class="stringliteral">&quot;()V&quot;</span>);</div></div><!-- fragment --><p> will throw an exception if there is no such method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clazz</td><td>Java class object. </td></tr>
    <tr><td class="paramname">name</td><td>Method name. </td></tr>
    <tr><td class="paramname">signature</td><td>Method signature, as defined by Java.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JNI method ID, not a null.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29" title="Get Java method ID, throw error if it is not found. ">GetMethodID</a> - for getting an ID of an object method. </dd></dl>

</div>
</div>
<a class="anchor" id="a2baac009502bcd0e2246c18002b535df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jbyteArray MJavaEnv::NewLocalByteArray </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new uninitialized Java byte array and add it to the list of local references. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Size of the array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Java byte array object. </dd></dl>

</div>
</div>
<a class="anchor" id="a5c45377d9cd43ca349b6f1e1ed6e7643"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jbyteArray MJavaEnv::NewLocalByteArray </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new initialized Java byte array and add it to the list of local references. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>Buffer with byte values. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the buffer and the result byte array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Java byte array object. </dd></dl>

</div>
</div>
<a class="anchor" id="a52c56817ebfad43f675b17ca6ab82ee7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jstring MJavaEnv::NewLocalStringUTF </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new Java string from UTF string and add it to the list of local references.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>String in UTF encoding from which a Java string has to be created.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Java string object. </dd></dl>

</div>
</div>
<a class="anchor" id="a090b4d59d8e3a55c16c22a59962d4b82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jstring MJavaEnv::NewLocalStringUTF </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___m_c_o_r_e.html#gae0f1a09eb8dfba6a5cf718419b3a0304">MStdString</a> &amp;&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new Java string from UTF string and add it to the list of local references.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>String in UTF encoding from which a Java string has to be created.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Java string object. </dd></dl>

</div>
</div>
<a class="anchor" id="a3fa84ba6966142a48b28c9cd912ba42f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">JNIEnv* MJavaEnv::operator-&gt; </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Call JNI methods using this environment class.</p>
<p>This operator saves a call of <a class="el" href="class_m_java_env.html#a18fba182a92fe876024da1e51e81a934">GetEnv()</a> so that instead of </p><div class="fragment"><div class="line">jmethodID idRead = env.<a class="code" href="class_m_java_env.html#a18fba182a92fe876024da1e51e81a934">GetEnv</a>()-&gt;GetMethodID(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>);</div></div><!-- fragment --><p> one has: </p><div class="fragment"><div class="line">jmethodID idRead = env-&gt;<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>);</div></div><!-- fragment --><p> Notice, <a class="el" href="class_m_java_env.html" title="Scoped Java environment handler. ">MJavaEnv</a> provides a number of wrapper methods that in addition to natives verifies the result of the operation and throws an exception at failure. For example, notice '.' instead of '-&gt;' </p><div class="fragment"><div class="line">jmethodID idRead = env.<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>); <span class="comment">// throws if such method is not found</span></div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>Native java environment variable. </dd></dl>

</div>
</div>
<a class="anchor" id="ae6702be38f1ae9881e11cbf35867bc39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const JNIEnv* MJavaEnv::operator-&gt; </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Call JNI methods using this environment class.</p>
<p>This operator saves a call of <a class="el" href="class_m_java_env.html#a18fba182a92fe876024da1e51e81a934">GetEnv()</a> so that instead of </p><div class="fragment"><div class="line">jmethodID idRead = env.<a class="code" href="class_m_java_env.html#a18fba182a92fe876024da1e51e81a934">GetEnv</a>()-&gt;GetMethodID(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>);</div></div><!-- fragment --><p> one has: </p><div class="fragment"><div class="line">jmethodID idRead = env-&gt;<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>);</div></div><!-- fragment --><p> Notice, <a class="el" href="class_m_java_env.html" title="Scoped Java environment handler. ">MJavaEnv</a> provides a number of wrapper methods that in addition to natives verifies the result of the operation and throws an exception at failure. For example, notice '.' instead of '-&gt;' </p><div class="fragment"><div class="line">jmethodID idRead = env.<a class="code" href="class_m_java_env.html#a2708f04d737291c77ead8c5c1bf04c29">GetMethodID</a>(clazz, <span class="stringliteral">&quot;read&quot;</span>, <span class="stringliteral">&quot;([BII)I&quot;</span>); <span class="comment">// throws if such method is not found</span></div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>Native java environment variable. </dd></dl>

</div>
</div>
<a class="anchor" id="a57e1b99f6dceb934ba10c31ee6b138fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void MJavaEnv::StaticExceptionCppToJava </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&#160;</td>
          <td class="paramname"><em>jenv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_m_exception.html">MException</a> &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Class method that initializes java exception in the current environment from a given C++ exception. </p>
<p>The robustness of this method assumes the presence of MTools Java facade that provides the exception hierarchy that matches the one of MeteringSDK. After the call is made the execution should immediately reach Java code for the exception to be raised from there.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jenv</td><td>Native Java environment. </td></tr>
    <tr><td class="paramname">ex</td><td>C++ exception that has to be converted into java exception for the current environment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_m_java_env.html#ade68b7c1be3aeed5a46eedb11e7520ef" title="Object method that initializes the java exception in the current environment from a given C++ excepti...">ExceptionCppToJava</a> - non-static version that is more convenient when there is <a class="el" href="class_m_java_env.html" title="Scoped Java environment handler. ">MJavaEnv</a> present. </dd>
<dd>
<a class="el" href="class_m_java_env.html#ae7e5742d214d7c2597e17f7d101eba8e" title="Convert java exception, if it is present, into C++. ">CheckForJavaException</a> - reverse method, convert java exception, if it is present, into C++. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_m_java_env.html">MJavaEnv</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
